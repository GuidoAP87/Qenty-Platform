{% extends 'base.html' %}

{% block content %}

<section class="hero">
    <h1>DescubrÃ­ tu Poder</h1>
    
    <p class="subtitle">
        Academia de Artes MÃ­sticas Qenty
    </p>

    <div class="moon-widget" style="margin: 0 auto 10px;">
        <div class="moon-icon" id="mainMoonIcon">ğŸŒ‘</div>
        <div class="moon-info" style="text-align: left;">
            <span class="moon-label">Fase Lunar Actual</span>
            <span class="moon-text" id="mainMoonText">Calculando...</span>
        </div>
    </div>

    <div class="lunar-cycle-container">
        <div class="phase-item" id="p0"><span class="phase-icon">ğŸŒ‘</span></div>
        <div class="phase-item" id="p1"><span class="phase-icon">ğŸŒ’</span></div>
        <div class="phase-item" id="p2"><span class="phase-icon">ğŸŒ“</span></div>
        <div class="phase-item" id="p3"><span class="phase-icon">ğŸŒ”</span></div>
        <div class="phase-item" id="p4"><span class="phase-icon">ğŸŒ•</span></div>
        <div class="phase-item" id="p5"><span class="phase-icon">ğŸŒ–</span></div>
        <div class="phase-item" id="p6"><span class="phase-icon">ğŸŒ—</span></div>
        <div class="phase-item" id="p7"><span class="phase-icon">ğŸŒ˜</span></div>
    </div>
</section>

<section class="courses-preview">
    <div class="catalogo-header" style="padding-top: 0; margin-bottom: 50px;">
        <h2 style="font-size: 2.5rem;">Comienza tu FormaciÃ³n</h2>
        <p style="font-size: 1.1rem; color: #666;">Selecciona tu herramienta de transformaciÃ³n</p>
    </div>

    <div class="grid-magica">
        {% for item in items %}
        <div class="course-card">
            
            <div class="course-icon">
                {% if 'Tarot' in item.nombre %}ğŸ”®
                {% elif 'Runas' in item.nombre %}á›Ÿ
                {% elif 'Velo' in item.nombre %}ğŸ•¯ï¸
                {% elif 'Defensa' in item.nombre %}ğŸ›¡ï¸
                {% elif 'Chaman' in item.nombre %}ğŸª¶
                {% else %}âœ¨{% endif %}
            </div>

            <div class="course-content">
                <h3>{{ item.nombre }}</h3>
                <div class="course-price">${{ item.precio }}</div>
            </div>

            <div class="course-overlay">
                <h3>{{ item.nombre }}</h3>
                <p class="course-desc">
                    {{ item.desc }}
                </p>
                <a href="/cursos" class="btn-course">Ver Detalle</a>
            </div>
            
        </div>
        {% endfor %}
    </div>

    <div style="text-align: center; margin-top: 50px;">
        <a href="/cursos" class="btn-main" style="padding: 15px 40px; font-size: 1rem; border: 2px solid var(--color-gold); background: transparent; color: var(--color-primary);">
            Explorar CatÃ¡logo Completo â†’
        </a>
    </div>
</section>

<section class="authority-section">
    <div class="profile-header">
        <div class="profile-photo-container">
            <img src="{{ url_for('static', filename='img/logo-qenty.png') }}" alt="Ariel Abraham Nihany" style="background: white;">
            <div class="expert-badge">âœ“</div>
        </div>
        
        <div class="profile-info">
            <span class="profile-title">Licenciado con FormaciÃ³n AcadÃ©mica Formal & GuÃ­a Espiritual</span>
            <h2>Ariel Abraham Nihany</h2>
            <p class="profile-bio">
                No soy un gurÃº, soy un puente. Mi misiÃ³n es unir la estructura clÃ­nica de la 
                <strong>formaciÃ³n acadÃ©mica formal</strong> con la profundidad simbÃ³lica del chamanismo y el Tarot. <br><br>
                He creado Qenty Espacio para quienes no se conforman con respuestas superficiales y buscan ordenar su historia con herramientas reales.
            </p>
            
            <div class="stats-grid">
                <div class="stat-item"><strong>+20</strong><span>AÃ±os Experiencia</span></div>
                <div class="stat-item"><strong>Acad.</strong><span>FormaciÃ³n ClÃ­nica</span></div>
                <div class="stat-item"><strong>100%</strong><span>Enfoque Ã‰tico</span></div>
            </div>
        </div>
    </div>

    <h2 class="value-pillars-title">Â¿Por quÃ© formarte en Qenty?</h2>
    <div class="pillars-grid">
        <div class="pillar-card">
            <span class="pillar-icon">ğŸ‘ï¸</span>
            <h3>Cruce de Mundos</h3>
            <p>
                Integramos <strong>formaciÃ³n acadÃ©mica formal</strong> y rituales ancestrales para una sanaciÃ³n real.
            </p>
        </div>
        <div class="pillar-card">
            <span class="pillar-icon">ğŸŒ±</span>
            <h3>Sin Atajos</h3>
            <p>No adivinamos futuros, construimos procesos conscientes y sÃ³lidos.</p>
        </div>
        <div class="pillar-card">
            <span class="pillar-icon">ğŸ›ï¸</span>
            <h3>SostÃ©n Profesional</h3>
            <p>Un espacio seguro sostenido por trayectoria terapÃ©utica real.</p>
        </div>
    </div>

    <div class="ethics-badge">
        <h3>GarantÃ­a de Encuadre Profesional</h3>
        <p style="color: #ddd; max-width: 800px; margin: 0 auto;">
            Qenty Espacio opera bajo un estricto cÃ³digo Ã©tico. Aunque integro saberes ancestrales, <strong>jamÃ¡s reemplazo tratamientos mÃ©dicos</strong>.
        </p>
    </div>
</section>

<script>
    // --- FASES LUNARES ---
    function getMoonPhase() {
        const newMoonRef = new Date(2024, 0, 11); 
        const lunarCycle = 29.53058867;
        const now = new Date();
        const diffTime = Math.abs(now - newMoonRef);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
        const phaseDay = diffDays % lunarCycle;
        
        let icon, text, phaseIndex;
        
        if (phaseDay < 1) { icon = "ğŸŒ‘"; text = "Luna Nueva"; phaseIndex = 0; }
        else if (phaseDay < 7.4) { icon = "ğŸŒ’"; text = "Creciente"; phaseIndex = 1; }
        else if (phaseDay < 8.4) { icon = "ğŸŒ“"; text = "Cuarto Creciente"; phaseIndex = 2; }
        else if (phaseDay < 14.8) { icon = "ğŸŒ”"; text = "Gibosa Creciente"; phaseIndex = 3; }
        else if (phaseDay < 15.8) { icon = "ğŸŒ•"; text = "Luna Llena"; phaseIndex = 4; }
        else if (phaseDay < 22.1) { icon = "ğŸŒ–"; text = "Gibosa Menguante"; phaseIndex = 5; }
        else if (phaseDay < 23.1) { icon = "ğŸŒ—"; text = "Cuarto Menguante"; phaseIndex = 6; }
        else { icon = "ğŸŒ˜"; text = "Menguante"; phaseIndex = 7; }

        document.getElementById('mainMoonIcon').textContent = icon;
        document.getElementById('mainMoonText').textContent = text;
        for(let i=0; i<8; i++) { document.getElementById('p'+i).classList.remove('active'); }
        document.getElementById('p'+phaseIndex).classList.add('active');
    }
    getMoonPhase();

    // --- POLVO MÃGICO ---
    document.addEventListener('mousemove', function(e) {
        let body = document.querySelector('body');
        let star = document.createElement('span');
        star.style.position = 'absolute';
        star.style.left = e.pageX + 'px';
        star.style.top = e.pageY + 'px';
        star.style.width = 3 + Math.random() * 5 + 'px';
        star.style.height = star.style.width;
        star.style.borderRadius = '50%';
        star.style.pointerEvents = 'none';
        star.style.opacity = '0.9';
        star.style.zIndex = '9999';
        star.style.background = '#FFD700';
        star.style.boxShadow = '0 0 8px #FFD700, 0 0 15px #DAA520'; 
        body.appendChild(star);

        let directionX = Math.random() * 2 - 1;
        let directionY = Math.random() * 3 - 0.5;
        let speed = 0.02 + Math.random() * 0.03;

        let animation = setInterval(() => {
            star.style.top = (parseFloat(star.style.top) + directionY) + 'px';
            star.style.left = (parseFloat(star.style.left) + directionX) + 'px';
            star.style.opacity = parseFloat(star.style.opacity) - speed;
            if(star.style.opacity <= 0) { clearInterval(animation); star.remove(); }
        }, 20);
    });
</script>

{% endblock %}